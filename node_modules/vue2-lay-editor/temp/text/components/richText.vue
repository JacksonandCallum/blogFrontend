<template>
  <div class="default-text">
    <div class="default-text-section">
      <div
        @keyup="onHandler"
        @input="onHandler"
        @mouseup="onHandler"
        @click="onHandler"
        id="layEditor-container"
        ref="layEditor-container"
      ></div>
    </div>
  </div>
</template>

<script>
const actions = [
  "bold",
  "underline",
  "strikeThrough",
  "justifyLeft",
  "justifyCenter",
  "justifyRight",
];

export default {
  name: "default-text",
  components: {},
  props: {},
  inject: ["parent"],
  data() {
    return {
      commandState: [],
    };
  },
  mounted() {},
  watch: {
    "parent.token": {
      immediate: true,
      handler() {
        this.$nextTick(() => {
          this.$refs["layEditor-container"].innerHTML =
            this.parent.content.template;
        });
      },
    },
  },

  methods: {
    onHandler() {
      this.onCommandState();
      let template = this.$refs["layEditor-container"].innerHTML;
      this.$emit("change", {
        template: template,
      });
    },
    onCommandState() {
      this.commandState = actions.filter((item) =>
        document.queryCommandState(item)
      );
      this.$emit("commandState", this.commandState);
    },
  },
};
</script>

<style lang="scss"></style>
