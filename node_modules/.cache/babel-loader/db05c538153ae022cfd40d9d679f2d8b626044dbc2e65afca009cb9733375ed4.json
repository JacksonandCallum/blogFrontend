{"ast":null,"code":"export default {\n  name: \"BlogDetail\",\n  data() {\n    return {\n      src: \"\",\n      imageLoaded: false,\n      // 新增标志位\n      blogId: this.$route.query.blogId,\n      blog: {}\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      this.$request.get(\"/blog/selectById/\" + this.blogId).then(res => {\n        this.blog = res.data || {};\n        console.log(\"BlogDetail\", this.blog);\n        this.imageLoaded = true;\n      });\n    }\n  },\n  watch: {\n    imageLoaded() {\n      if (this.imageLoaded) {\n        this.$nextTick(() => {\n          this.$refs.articleImage.setCurrentSrc(this.src);\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","data","src","imageLoaded","blogId","$route","query","blog","created","load","methods","$request","get","then","res","console","log","watch","$nextTick","$refs","articleImage","setCurrentSrc"],"sources":["src/views/front/BlogDetail.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"main-content\">\r\n            <!-- 封面 -->\r\n            <div class=\"article-head my-animation-slide-top\">\r\n                <!-- 背景图片 -->\r\n                <el-image class=\"article-image my-el-image\" v-once lazy v-if=\"src\" :src=\"src\" fit=\"cover\"\r\n                    ref=\"articleImage\">\r\n                    <div slot=\"error\" class=\"image-slot\">\r\n                        <div class=\"article-image\"></div>\r\n                    </div>\r\n                </el-image>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"BlogDetail\",\r\n    data() {\r\n        return {\r\n            src: \"\",\r\n            imageLoaded: false, // 新增标志位\r\n            blogId: this.$route.query.blogId,\r\n            blog: {}\r\n        }\r\n    },\r\n    created() {\r\n        this.load()\r\n    },\r\n    methods: {\r\n        load() {\r\n            this.$request.get(\"/blog/selectById/\" + this.blogId).then(res => {\r\n                this.blog = res.data || {}\r\n                console.log(\"BlogDetail\", this.blog)\r\n                this.imageLoaded = true;\r\n            })\r\n        }\r\n    },\r\n    watch: {\r\n        imageLoaded() {\r\n            if (this.imageLoaded) {\r\n                this.$nextTick(() => {\r\n                    this.$refs.articleImage.setCurrentSrc(this.src);\r\n                })\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.article-head {\r\n    height: 40vh;\r\n    position: relative;\r\n}\r\n\r\n/* 以my-animation-开头的class */\r\n[class*=my-animation-] {\r\n    animation-duration: 1s;\r\n    animation-timing-function: ease-out;\r\n    animation-fill-mode: both;\r\n}\r\n\r\n\r\n.my-animation-slide-top {\r\n    animation-name: slide-top\r\n}\r\n\r\n.article-image::before {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgba(0, 0, 0, 0.15);\r\n    content: \"\";\r\n}\r\n</style>"],"mappings":"AAkBA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,GAAA;MACAC,WAAA;MAAA;MACAC,MAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAF,MAAA;MACAG,IAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAD,KAAA;MACA,KAAAE,QAAA,CAAAC,GAAA,4BAAAR,MAAA,EAAAS,IAAA,CAAAC,GAAA;QACA,KAAAP,IAAA,GAAAO,GAAA,CAAAb,IAAA;QACAc,OAAA,CAAAC,GAAA,oBAAAT,IAAA;QACA,KAAAJ,WAAA;MACA;IACA;EACA;EACAc,KAAA;IACAd,YAAA;MACA,SAAAA,WAAA;QACA,KAAAe,SAAA;UACA,KAAAC,KAAA,CAAAC,YAAA,CAAAC,aAAA,MAAAnB,GAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}