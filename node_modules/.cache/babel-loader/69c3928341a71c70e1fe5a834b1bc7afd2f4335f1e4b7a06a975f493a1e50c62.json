{"ast":null,"code":"export default {\n  name: \"WorkspaceJsonImageCard\",\n  props: {\n    content: {\n      default() {\n        return {};\n      }\n    }\n  },\n  data() {\n    return {\n      currentW: \"\",\n      src: \"\",\n      loading: true\n    };\n  },\n  watch: {\n    content: {\n      immediate: true,\n      deep: true,\n      handler() {\n        this.$nextTick(() => {\n          this.initState();\n        });\n      }\n    }\n  },\n  mounted() {\n    addEventListener(\"resize\", () => {\n      this.initState();\n    });\n  },\n  methods: {\n    initState() {\n      if (!this.content.src) this.loading = true;\n      this.src = this.content.src;\n      let style = this.content.style;\n      this.currentW = style.width;\n\n      // if (!this.$refs.image) return;\n      // let clientWidth = this.$refs.image.clientWidth;\n      // let clientHeight = document.body.clientHeight;\n      // let style = this.content.style;\n      // this.src = this.content.src;\n      // let w = clientWidth * style.ratioW;\n      // let h = clientHeight * style.ratioH;\n      // this.maxWidth = w > 0 ? w + \"px\" : \"200px\";\n      // this.maxHeight = h > 0 ? h + \"px\" : \"200px\";\n    },\n    onImage(event) {\n      this.loading = false;\n    },\n    clickImg() {\n      this.$emit(\"clickImg\", this.src);\n    }\n  }\n};","map":{"version":3,"names":["name","props","content","default","data","currentW","src","loading","watch","immediate","deep","handler","$nextTick","initState","mounted","addEventListener","methods","style","width","onImage","event","clickImg","$emit"],"sources":["node_modules/vue2-lay-render/components/image-card.vue"],"sourcesContent":["<template>\n  <div ref=\"image\" class=\"image-card\">\n    <div class=\"image-container\" @click=\"clickImg\">\n      <div\n        class=\"image\"\n        :style=\"{\n          width: currentW + '%',\n        }\"\n      >\n        <img @load=\"onImage\" :src=\"src\" alt=\"\" v-show=\"!loading\" />\n        <img\n          src=\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E\"\n          alt=\"\"\n          v-if=\"loading\"\n          class=\"empty-img\"\n        />\n      </div>\n      <div v-if=\"content.tips\" class=\"tips\">{{ content.tips }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"WorkspaceJsonImageCard\",\n  props: {\n    content: {\n      default() {\n        return {};\n      },\n    },\n  },\n  data() {\n    return {\n      currentW: \"\",\n      src: \"\",\n      loading: true,\n    };\n  },\n  watch: {\n    content: {\n      immediate: true,\n      deep: true,\n      handler() {\n        this.$nextTick(() => {\n          this.initState();\n        });\n      },\n    },\n  },\n  mounted() {\n    addEventListener(\"resize\", () => {\n      this.initState();\n    });\n  },\n  methods: {\n    initState() {\n      if (!this.content.src) this.loading = true;\n      this.src = this.content.src;\n      let style = this.content.style;\n      this.currentW = style.width;\n\n      // if (!this.$refs.image) return;\n      // let clientWidth = this.$refs.image.clientWidth;\n      // let clientHeight = document.body.clientHeight;\n      // let style = this.content.style;\n      // this.src = this.content.src;\n      // let w = clientWidth * style.ratioW;\n      // let h = clientHeight * style.ratioH;\n      // this.maxWidth = w > 0 ? w + \"px\" : \"200px\";\n      // this.maxHeight = h > 0 ? h + \"px\" : \"200px\";\n    },\n    onImage(event) {\n      this.loading = false;\n    },\n    clickImg() {\n      this.$emit(\"clickImg\", this.src);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.image-card {\n  display: flex;\n  justify-content: center;\n}\n\n.image-container {\n  width: 100%;\n  padding: 20px;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.image-container .image {\n  display: flex;\n  background: #f5f5f5;\n  position: relative;\n}\n\n.empty-img {\n  background: #f5f5f5\n    url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='80' height='80' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3ClinearGradient x1='94.087%25' y1='0%25' x2='94.087%25' y2='90.559%25' id='a'%3E%3Cstop stop-color='%23606060' stop-opacity='0' offset='0%25'/%3E%3Cstop stop-color='%23606060' stop-opacity='.3' offset='100%25'/%3E%3C/linearGradient%3E%3ClinearGradient x1='100%25' y1='8.674%25' x2='100%25' y2='90.629%25' id='b'%3E%3Cstop stop-color='%23606060' offset='0%25'/%3E%3Cstop stop-color='%23606060' stop-opacity='.3' offset='100%25'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cg fill='none' fill-rule='evenodd' opacity='.9'%3E%3Cpath d='M40 0c22.091 0 40 17.909 40 40S62.091 80 40 80v-7c18.225 0 33-14.775 33-33S58.225 7 40 7V0z' fill='url(%23a)'/%3E%3Cpath d='M40 0v7C21.775 7 7 21.775 7 40s14.775 33 33 33v7C17.909 80 0 62.091 0 40S17.909 0 40 0z' fill='url(%23b)'/%3E%3Ccircle fill='%23606060' cx='40.5' cy='3.5' r='3.5'/%3E%3CanimateTransform attributeName='transform' begin='0s' dur='1s' type='rotate' values='0 40 40;360 40 40' repeatCount='indefinite'/%3E%3C/g%3E%3C/svg%3E\")\n    no-repeat 50% 50%;\n  background-size: 16px;\n  border-radius: 5px;\n}\n\n.tips {\n  text-align: center;\n  color: #999;\n  font-size: 12px;\n  padding-top: 10px;\n}\n</style>\n"],"mappings":"AAuBA;EACAA,IAAA;EACAC,KAAA;IACAC,OAAA;MACAC,QAAA;QACA;MACA;IACA;EACA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,GAAA;MACAC,OAAA;IACA;EACA;EACAC,KAAA;IACAN,OAAA;MACAO,SAAA;MACAC,IAAA;MACAC,QAAA;QACA,KAAAC,SAAA;UACA,KAAAC,SAAA;QACA;MACA;IACA;EACA;EACAC,QAAA;IACAC,gBAAA;MACA,KAAAF,SAAA;IACA;EACA;EACAG,OAAA;IACAH,UAAA;MACA,UAAAX,OAAA,CAAAI,GAAA,OAAAC,OAAA;MACA,KAAAD,GAAA,QAAAJ,OAAA,CAAAI,GAAA;MACA,IAAAW,KAAA,QAAAf,OAAA,CAAAe,KAAA;MACA,KAAAZ,QAAA,GAAAY,KAAA,CAAAC,KAAA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC,QAAAC,KAAA;MACA,KAAAb,OAAA;IACA;IACAc,SAAA;MACA,KAAAC,KAAA,kBAAAhB,GAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}