{"ast":null,"code":"const twoPoem = () => import(\"@/components/twoPoem.vue\");\nconst proTag = () => import(\"@/components/proTag\");\nconst articleList = () => import(\"@/components/articleList\");\nconst myFooter = () => import(\"@/components/myFooter.vue\");\nexport default {\n  components: {\n    twoPoem,\n    proTag,\n    articleList,\n    myFooter\n  },\n  data() {\n    return {\n      sortId: this.$route.query.sortId,\n      articles: [],\n      allArticles: []\n    };\n  },\n  computed: {},\n  watch: {\n    $route() {\n      this.articles.splice(0, this.articles.length);\n      this.sortId = this.$route.query.sortId;\n      this.getArticles();\n    }\n  },\n  created() {\n    this.getArticles();\n    this.loadArticlesForTags();\n  },\n  mounted() {},\n  methods: {\n    loadArticlesForTags() {\n      this.$request.get(\"/blog/selectCategoryID/\" + this.sortId).then(res => {\n        // 对每篇文章的标签数组进行去重\n        this.allArticles = res.data.map(article => ({\n          ...article,\n          tags: this.uniqueTags(this.convertToTagsArray(article.tags))\n        }));\n        // console.log(this.allArticles);\n      });\n    },\n    getArticles() {\n      this.$request.get(\"/blog/selectCategoryID/\" + this.sortId).then(res => {\n        this.articles = res.data;\n        // console.log(this.articles)\n      });\n    },\n    convertToTagsArray(tagsString) {\n      // 去除字符串两端的双引号并按逗号分割\n      return tagsString.replace(/^\"|\"$/g, \"\").split(\",\");\n    },\n    uniqueTags(tagsArray) {\n      return Array.from(new Set(tagsArray));\n    },\n    // 处理标签，去除字符串数组的符号\n    processTags(tagsArray) {\n      // 将标签数组转换为字符串，然后去除字符串两端的中括号和双引号\n      let tagsString = tagsArray.join(',');\n      return tagsString.replace(/[\\[\\]\"]/g, \"\");\n    }\n  }\n};","map":{"version":3,"names":["twoPoem","proTag","articleList","myFooter","components","data","sortId","$route","query","articles","allArticles","computed","watch","splice","length","getArticles","created","loadArticlesForTags","mounted","methods","$request","get","then","res","map","article","tags","uniqueTags","convertToTagsArray","tagsString","replace","split","tagsArray","Array","from","Set","processTags","join"],"sources":["src/views/front/BlogSort.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <!-- 两句诗 -->\r\n        <div class=\"my-animation-slide-top\">\r\n            <twoPoem></twoPoem>\r\n        </div>\r\n\r\n        <div style=\"background: white; padding-top: 40px\" class=\"my-animation-slide-bottom\">\r\n            <!-- 标签 -->\r\n            <div class=\"sort-warp shadow-box\" v-if=\"!$common.isEmpty(articles)\">\r\n                <div v-for=\"(article, index) in allArticles\" :key=\"index\" :class=\"{\r\n                    isActive:\r\n                        !$common.isEmpty(article.tags)\r\n                }\">\r\n                    <proTag :info=\"processTags(article.tags)\"\r\n                        :color=\"$constant.before_color_list[Math.floor(Math.random() * 6)]\" style=\"margin: 12px\">\r\n                    </proTag>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- 文章 -->\r\n            <div class=\"article-wrap\">\r\n                <articleList :articleList=\"articles\"></articleList>\r\n                <div class=\"pagination-wrap\">\r\n                    <div style=\"user-select: none\">~~到底啦~~</div>\r\n                </div>\r\n            </div>\r\n            <!-- 页脚 -->\r\n            <myFooter></myFooter>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nconst twoPoem = () => import(\"@/components/twoPoem.vue\");\r\nconst proTag = () => import(\"@/components/proTag\");\r\nconst articleList = () => import(\"@/components/articleList\");\r\nconst myFooter = () => import(\"@/components/myFooter.vue\");\r\n\r\nexport default {\r\n    components: {\r\n        twoPoem,\r\n        proTag,\r\n        articleList,\r\n        myFooter,\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            sortId: this.$route.query.sortId,\r\n            articles: [],\r\n            allArticles: []\r\n        };\r\n    },\r\n\r\n    computed: {},\r\n\r\n    watch: {\r\n        $route() {\r\n            this.articles.splice(0, this.articles.length);\r\n            this.sortId = this.$route.query.sortId;\r\n            this.getArticles();\r\n        },\r\n    },\r\n\r\n    created() {\r\n        this.getArticles();\r\n        this.loadArticlesForTags();\r\n    },\r\n\r\n    mounted() { },\r\n\r\n    methods: {\r\n        loadArticlesForTags() {\r\n            this.$request.get(\"/blog/selectCategoryID/\" + this.sortId).then((res) => {\r\n                // 对每篇文章的标签数组进行去重\r\n                this.allArticles = res.data.map(article => ({\r\n                    ...article,\r\n                    tags: this.uniqueTags(this.convertToTagsArray(article.tags))\r\n                }));\r\n                // console.log(this.allArticles);\r\n            });\r\n        },\r\n        getArticles() {\r\n            this.$request.get(\"/blog/selectCategoryID/\" + this.sortId).then((res) => {\r\n                this.articles = res.data\r\n                // console.log(this.articles)\r\n            });\r\n        },\r\n        convertToTagsArray(tagsString) {\r\n    // 去除字符串两端的双引号并按逗号分割\r\n    return tagsString.replace(/^\"|\"$/g, \"\").split(\",\");\r\n},\r\n        uniqueTags(tagsArray) {\r\n            return Array.from(new Set(tagsArray));\r\n        },\r\n        // 处理标签，去除字符串数组的符号\r\n        processTags(tagsArray) {\r\n            // 将标签数组转换为字符串，然后去除字符串两端的中括号和双引号\r\n            let tagsString = tagsArray.join(',');\r\n            return tagsString.replace(/[\\[\\]\"]/g, \"\");\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 以my-animation-开头的class */\r\n[class*=\"my-animation-\"] {\r\n    animation-duration: 1s;\r\n    animation-timing-function: ease-out;\r\n    animation-fill-mode: both;\r\n}\r\n\r\n.my-animation-slide-top {\r\n    animation-name: slide-top;\r\n}\r\n\r\n.my-animation-slide-bottom {\r\n    animation-name: slide-bottom;\r\n}\r\n\r\n.sort-warp {\r\n    width: 70%;\r\n    max-width: 780px;\r\n    margin: 0 auto;\r\n    padding: 20px;\r\n    border-radius: 10px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n.shadow-box {\r\n    box-shadow: 0 1px 20px -6px rgba(0, 0, 0, 0.5);\r\n    transition: all 0.3s ease;\r\n}\r\n\r\n.shadow-box:hover {\r\n    box-shadow: 0 5px 10px 5px rgba(110, 110, 110, 0.4);\r\n}\r\n\r\n.article-wrap {\r\n    width: 70%;\r\n    margin: 40px auto;\r\n    min-height: 600px;\r\n}\r\n\r\n.isActive {\r\n    animation: scale 1.5s ease-in-out infinite;\r\n}\r\n\r\n.pagination-wrap {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-top: 40px;\r\n}\r\n\r\n@media screen and (max-width: 900px) {\r\n    .sort-warp {\r\n        width: 90%;\r\n    }\r\n\r\n    .article-wrap {\r\n        width: 90%;\r\n    }\r\n}\r\n</style>\r\n"],"mappings":"AAkCA,MAAAA,OAAA,GAAAA,CAAA;AACA,MAAAC,MAAA,GAAAA,CAAA;AACA,MAAAC,WAAA,GAAAA,CAAA;AACA,MAAAC,QAAA,GAAAA,CAAA;AAEA;EACAC,UAAA;IACAJ,OAAA;IACAC,MAAA;IACAC,WAAA;IACAC;EACA;EAEAE,KAAA;IACA;MACAC,MAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAF,MAAA;MACAG,QAAA;MACAC,WAAA;IACA;EACA;EAEAC,QAAA;EAEAC,KAAA;IACAL,OAAA;MACA,KAAAE,QAAA,CAAAI,MAAA,SAAAJ,QAAA,CAAAK,MAAA;MACA,KAAAR,MAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAF,MAAA;MACA,KAAAS,WAAA;IACA;EACA;EAEAC,QAAA;IACA,KAAAD,WAAA;IACA,KAAAE,mBAAA;EACA;EAEAC,QAAA;EAEAC,OAAA;IACAF,oBAAA;MACA,KAAAG,QAAA,CAAAC,GAAA,kCAAAf,MAAA,EAAAgB,IAAA,CAAAC,GAAA;QACA;QACA,KAAAb,WAAA,GAAAa,GAAA,CAAAlB,IAAA,CAAAmB,GAAA,CAAAC,OAAA;UACA,GAAAA,OAAA;UACAC,IAAA,OAAAC,UAAA,MAAAC,kBAAA,CAAAH,OAAA,CAAAC,IAAA;QACA;QACA;MACA;IACA;IACAX,YAAA;MACA,KAAAK,QAAA,CAAAC,GAAA,kCAAAf,MAAA,EAAAgB,IAAA,CAAAC,GAAA;QACA,KAAAd,QAAA,GAAAc,GAAA,CAAAlB,IAAA;QACA;MACA;IACA;IACAuB,mBAAAC,UAAA;MACA;MACA,OAAAA,UAAA,CAAAC,OAAA,eAAAC,KAAA;IACA;IACAJ,WAAAK,SAAA;MACA,OAAAC,KAAA,CAAAC,IAAA,KAAAC,GAAA,CAAAH,SAAA;IACA;IACA;IACAI,YAAAJ,SAAA;MACA;MACA,IAAAH,UAAA,GAAAG,SAAA,CAAAK,IAAA;MACA,OAAAR,UAAA,CAAAC,OAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}