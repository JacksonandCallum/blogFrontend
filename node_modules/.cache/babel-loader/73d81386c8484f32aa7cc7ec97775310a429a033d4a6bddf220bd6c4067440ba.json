{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"FrontLayout\",\n  data() {\n    return {\n      top: '',\n      notice: [],\n      categoryInfo: [],\n      user: JSON.parse(localStorage.getItem(\"USER\") || '{}'),\n      isHovered: false,\n      // 添加变量控制悬停状态\n      top: '',\n      navShow: true // 确保导航栏初始可见\n    };\n  },\n  computed: {},\n  watch: {\n    // 监听top值的变化\n    top(newValue, oldValue) {\n      // 等新值大于100的时候再做变化（优化一下）\n      if (newValue > 100) {\n        if (newValue > oldValue) {\n          this.navShow = false;\n          console.log('向下滚动');\n        } else {\n          this.navShow = true;\n          console.log('向上滚动');\n        }\n      }\n    }\n  },\n  created() {},\n  mounted() {\n    this.loadNotice();\n    this.loadCategory();\n    window.addEventListener('scroll', () => {\n      this.top = document.documentElement.scrollTop || document.body.scrollTop || window.scrollY;\n    });\n  },\n  destroyed() {},\n  methods: {\n    // 鼠标悬停时触发\n    handleMouseEnter() {\n      this.isHovered = true;\n    },\n    // 鼠标离开时触发\n    handleMouseLeave() {\n      this.isHovered = false;\n    },\n    loadNotice() {\n      this.$request.get('/notice/selectAll').then(res => {\n        this.notice = res.data;\n        let i = 0;\n        if (this.notice && this.notice.length) {\n          this.top = this.notice[0].content;\n          setInterval(() => {\n            this.top = this.notice[i].content;\n            i++;\n            if (i === this.notice.length) {\n              i = 0;\n            }\n          }, 2500);\n        }\n      });\n    },\n    updateUser() {\n      this.user = JSON.parse(localStorage.getItem('USER') || '{}'); // 重新获取下用户的最新信息\n    },\n    // 退出登录\n    logout() {\n      localStorage.removeItem(\"USER\");\n      location.href = \"/front/person\";\n    },\n    // 到后台\n    toBack() {\n      setTimeout(() => {\n        this.$router.push(\"/login\");\n      }, 0);\n    },\n    // 分类信息\n    loadCategory() {\n      this.$request.get(\"/category/selectAll\").then(res => {\n        this.categoryInfo = res.data;\n        console.log(res.data);\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","top","notice","categoryInfo","user","JSON","parse","localStorage","getItem","isHovered","navShow","computed","watch","newValue","oldValue","console","log","created","mounted","loadNotice","loadCategory","window","addEventListener","document","documentElement","scrollTop","body","scrollY","destroyed","methods","handleMouseEnter","handleMouseLeave","$request","get","then","res","i","length","content","setInterval","updateUser","logout","removeItem","location","href","toBack","setTimeout","$router","push"],"sources":["src/views/Front.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- 公告 -->\r\n    <!-- <div class=\"front-notice\"><i class=\"el-icon-bell\" style=\"margin-right: 2px\"></i>公告：{{ top }}</div> -->\r\n    <!--头部-->\r\n    <!-- el过渡动画 -->\r\n    <transition name=\"el-fade-in-linear\">\r\n      <div class=\"front-header\" id=\"nav-bar\" :class=\"[{ 'navbar-hover': isHovered }, navShow ? 'navOn' : 'navOff']\"\r\n        @mouseenter=\"handleMouseEnter\" @mouseleave=\"handleMouseLeave\">\r\n        <!-- 左边 -->\r\n        <div class=\"front-header-left\">\r\n          <!-- <img src=\"@/assets/imgs/logo.png\" alt=\"\"> -->\r\n          <div class=\"title\" style=\"color: white;\">\r\n            <span @click=\"$router.push({ path: '/front/home' })\">Mr Lv's BLOG</span>\r\n          </div>\r\n        </div>\r\n        <!-- 中间 导航列表 -->\r\n        <div>\r\n          <div class=\"front-header-center\">\r\n            <div class=\"front-header-nav\">\r\n              <el-menu :default-active=\"$route.path\" mode=\"horizontal\" router>\r\n                <el-menu-item index=\"/front/home\" class=\"active\">\r\n                  🏡 <span>首页</span>\r\n                </el-menu-item>\r\n                <!-- <el-menu-item index=\"/front/person\">个人中心</el-menu-item> -->\r\n                <el-menu-item class=\"active\">\r\n                  <el-dropdown :hide-timeout=\"500\" placement=\"bottom\">\r\n                    <li>\r\n                      <div class=\"my-menu\">\r\n                        📒 <span>记录</span>\r\n                      </div>\r\n                    </li>\r\n                    <el-dropdown-menu slot=\"dropdown\" class=\"drop-items\">\r\n                      <el-dropdown-item v-for=\"category in categoryInfo\" :key=\"category.id\">\r\n                        <!-- @click=\"$router.push({ path: '/front/blogSort', query: { sortId: category.id } }) -->\r\n                        <div @click=\"$router.push('/front/blogSort?sortId=' + category.id)\">\r\n                          {{ category.name }}\r\n                        </div>\r\n                      </el-dropdown-item>\r\n                    </el-dropdown-menu>\r\n                  </el-dropdown>\r\n                </el-menu-item>\r\n                <el-menu-item index=\"/front/activityCenter\" class=\"active\">\r\n                  🧰 <span>活动中心</span>\r\n                </el-menu-item>\r\n                <el-menu-item index=\"/front/about\" class=\"active\">\r\n                  🌏 <span>关于本网站</span>\r\n                </el-menu-item>\r\n                <el-menu-item class=\"active\">\r\n                  📪 <span @click=\"toBack()\">后台</span>\r\n                </el-menu-item>\r\n              </el-menu>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- 右边 -->\r\n        <div class=\"front-header-right\">\r\n          <div>\r\n            <el-dropdown>\r\n              <div class=\"front-header-dropdown\" style=\"cursor: pointer;\">\r\n                <img :src=\"user.avatar\" alt=\"\" class=\"img\">\r\n                <div style=\"margin-left: 10px;color: black;\">\r\n                  <span style=\"color: aliceblue;\">{{ user.username }}</span>\r\n                </div>\r\n              </div>\r\n              <el-dropdown-menu slot=\"dropdown\" class=\"drop-items-right\">\r\n                <div v-if=\"!user.username\">\r\n                  <el-dropdown-item>\r\n                    <div style=\"text-decoration: none\" @click=\"$router.push('/front/person')\"\r\n                      v-if=\"$common.isEmpty($store.state.currentUser)\">\r\n                      <i class=\"fa fa-sign-in\" aria-hidden=\"true\"></i> <span>登录</span>\r\n                    </div>\r\n                  </el-dropdown-item>\r\n                </div>\r\n                <div v-else>\r\n                  <el-dropdown-item>\r\n                    <div style=\"text-decoration: none\" @click=\"$router.push('/front/person')\"\r\n                      v-if=\"!$common.isEmpty($store.state.currentUser)\">\r\n                      <i class=\"fa fa-user-circle\" aria-hidden=\"true\"></i> <span>个人中心</span>\r\n                    </div>\r\n                  </el-dropdown-item>\r\n                  <el-dropdown-item>\r\n                    <div style=\"text-decoration: none\" @click=\"logout\"\r\n                      v-if=\"!$common.isEmpty($store.state.currentUser)\">\r\n                      <i class=\"fa fa-sign-out\" aria-hidden=\"true\"></i> <span>退出</span>\r\n                    </div>\r\n                  </el-dropdown-item>\r\n                </div>\r\n\r\n              </el-dropdown-menu>\r\n            </el-dropdown>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </transition>\r\n\r\n    <!--主体-->\r\n    <div class=\"main-body\">\r\n      <router-view ref=\"child\" @update:user=\"updateUser\" />\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: \"FrontLayout\",\r\n\r\n  data() {\r\n    return {\r\n      top: '',\r\n      notice: [],\r\n      categoryInfo: [],\r\n      user: JSON.parse(localStorage.getItem(\"USER\") || '{}'),\r\n      isHovered: false, // 添加变量控制悬停状态\r\n      top: '',\r\n      navShow: true  // 确保导航栏初始可见\r\n    }\r\n  },\r\n  computed: {},\r\n  watch: {\r\n    // 监听top值的变化\r\n    top(newValue, oldValue) {\r\n      // 等新值大于100的时候再做变化（优化一下）\r\n      if (newValue > 100) {\r\n        if (newValue > oldValue) {\r\n          this.navShow = false\r\n          console.log('向下滚动')\r\n        } else {\r\n          this.navShow = true\r\n          console.log('向上滚动')\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n\r\n  },\r\n  mounted() {\r\n    this.loadNotice()\r\n    this.loadCategory()\r\n    window.addEventListener('scroll', () => {\r\n      this.top = document.documentElement.scrollTop || document.body.scrollTop || window.scrollY\r\n    })\r\n  },\r\n  destroyed() {\r\n  },\r\n  methods: {\r\n    // 鼠标悬停时触发\r\n    handleMouseEnter() {\r\n      this.isHovered = true;\r\n    },\r\n    // 鼠标离开时触发\r\n    handleMouseLeave() {\r\n      this.isHovered = false;\r\n    },\r\n    loadNotice() {\r\n      this.$request.get('/notice/selectAll').then(res => {\r\n        this.notice = res.data\r\n        let i = 0\r\n        if (this.notice && this.notice.length) {\r\n          this.top = this.notice[0].content\r\n          setInterval(() => {\r\n            this.top = this.notice[i].content\r\n            i++\r\n            if (i === this.notice.length) {\r\n              i = 0\r\n            }\r\n          }, 2500)\r\n        }\r\n      })\r\n    },\r\n    updateUser() {\r\n      this.user = JSON.parse(localStorage.getItem('USER') || '{}')   // 重新获取下用户的最新信息\r\n    },\r\n    // 退出登录\r\n    logout() {\r\n      localStorage.removeItem(\"USER\");\r\n      location.href = \"/front/person\"\r\n    },\r\n    // 到后台\r\n    toBack() {\r\n      setTimeout(() => {\r\n        this.$router.push(\"/login\");\r\n      }, 0)\r\n    },\r\n    // 分类信息\r\n    loadCategory() {\r\n      this.$request.get(\"/category/selectAll\").then(res => {\r\n        this.categoryInfo = res.data\r\n        console.log(res.data)\r\n      })\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import \"@/assets/css/front.css\";\r\n\r\n.drop-items {\r\n  text-align: center;\r\n  box-shadow: 0 1px 20px -6px rgba(0, 0, 0, 0.5);\r\n  transition: all 0.3s ease;\r\n  /* background-color: transparent; */\r\n}\r\n\r\n.drop-items:hover {\r\n  box-shadow: 0 5px 10px 5px rgba(110, 110, 110, 0.4);\r\n}\r\n\r\n.drop-items li {\r\n  font-size: 15px;\r\n}\r\n\r\n.drop-items li:hover {\r\n  background-color: white;\r\n  color: #409eff;\r\n}\r\n\r\n.drop-items-right {\r\n  box-shadow: 0 1px 20px -6px rgba(0, 0, 0, 0.5);\r\n  transition: all 0.3s ease;\r\n  /* background-color: transparent; */\r\n}\r\n\r\n.drop-items-right:hover {\r\n  box-shadow: 0 5px 10px 5px rgba(110, 110, 110, 0.4);\r\n}\r\n\r\n.drop-items-right li {\r\n  /* font-size: 15px; */\r\n}\r\n\r\n.drop-items-right li:hover {\r\n  background-color: white;\r\n  color: #409eff;\r\n}\r\n\r\n.xxx {\r\n  /* 固定位置，不随滚动条滚动 */\r\n  position: fixed;\r\n  z-index: 100;\r\n  /* 禁止选中文字 */\r\n  user-select: none;\r\n  background-color: transparent;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.front-header {\r\n  position: fixed;\r\n  width: 100%;\r\n  background-color: transparent;\r\n  transition: background-color 0.3s;\r\n  z-index: 100;\r\n}\r\n\r\n\r\n.front-header.navbar-hover {\r\n  /* background-color: rgba(0, 34, 77, 0.05); */\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.front-header-center .active:active,\r\n.front-header-center .active:focus,\r\n.front-header-center .active:hover {\r\n  background-color: transparent;\r\n}\r\n\r\n.main-body {\r\n  /* margin-top: 80px; */\r\n}\r\n\r\n@keyframes screen {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n}\r\n\r\n.navOn {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  transition: all 0.2s ease-in-out 0.2s;\r\n  transform: translateZ(0);\r\n}\r\n\r\n.navOff {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  transition: all 0.2s ease-in-out 0.2s;\r\n  transform: translate3d(0, -100%, 0);\r\n}\r\n</style>"],"mappings":";AA0GA;EACAA,IAAA;EAEAC,KAAA;IACA;MACAC,GAAA;MACAC,MAAA;MACAC,YAAA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,SAAA;MAAA;MACAR,GAAA;MACAS,OAAA;IACA;EACA;EACAC,QAAA;EACAC,KAAA;IACA;IACAX,IAAAY,QAAA,EAAAC,QAAA;MACA;MACA,IAAAD,QAAA;QACA,IAAAA,QAAA,GAAAC,QAAA;UACA,KAAAJ,OAAA;UACAK,OAAA,CAAAC,GAAA;QACA;UACA,KAAAN,OAAA;UACAK,OAAA,CAAAC,GAAA;QACA;MACA;IACA;EACA;EACAC,QAAA,GAEA;EACAC,QAAA;IACA,KAAAC,UAAA;IACA,KAAAC,YAAA;IACAC,MAAA,CAAAC,gBAAA;MACA,KAAArB,GAAA,GAAAsB,QAAA,CAAAC,eAAA,CAAAC,SAAA,IAAAF,QAAA,CAAAG,IAAA,CAAAD,SAAA,IAAAJ,MAAA,CAAAM,OAAA;IACA;EACA;EACAC,UAAA,GACA;EACAC,OAAA;IACA;IACAC,iBAAA;MACA,KAAArB,SAAA;IACA;IACA;IACAsB,iBAAA;MACA,KAAAtB,SAAA;IACA;IACAU,WAAA;MACA,KAAAa,QAAA,CAAAC,GAAA,sBAAAC,IAAA,CAAAC,GAAA;QACA,KAAAjC,MAAA,GAAAiC,GAAA,CAAAnC,IAAA;QACA,IAAAoC,CAAA;QACA,SAAAlC,MAAA,SAAAA,MAAA,CAAAmC,MAAA;UACA,KAAApC,GAAA,QAAAC,MAAA,IAAAoC,OAAA;UACAC,WAAA;YACA,KAAAtC,GAAA,QAAAC,MAAA,CAAAkC,CAAA,EAAAE,OAAA;YACAF,CAAA;YACA,IAAAA,CAAA,UAAAlC,MAAA,CAAAmC,MAAA;cACAD,CAAA;YACA;UACA;QACA;MACA;IACA;IACAI,WAAA;MACA,KAAApC,IAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACA;IACA;IACAiC,OAAA;MACAlC,YAAA,CAAAmC,UAAA;MACAC,QAAA,CAAAC,IAAA;IACA;IACA;IACAC,OAAA;MACAC,UAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;MACA;IACA;IACA;IACA5B,aAAA;MACA,KAAAY,QAAA,CAAAC,GAAA,wBAAAC,IAAA,CAAAC,GAAA;QACA,KAAAhC,YAAA,GAAAgC,GAAA,CAAAnC,IAAA;QACAe,OAAA,CAAAC,GAAA,CAAAmB,GAAA,CAAAnC,IAAA;MACA;IACA;EACA;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}