"use strict";(self["webpackChunkblog_frontend"]=self["webpackChunkblog_frontend"]||[]).push([[205],{52205:function(t,e,i){i.r(e),i.d(e,{default:function(){return h}});var a=function(){var t=this,e=t._self._c;return e("div",[this.$common.isEmpty(t.currentUser)?e("div",{staticClass:"myCenter in-up-container my-animation-hideToShow"},[t._m(0),e("div",{staticClass:"in-up",attrs:{id:"loginAndRegist"}},[e("div",{staticClass:"form-container sign-up-container"},[e("div",{staticClass:"myCenter"},[e("h1",[t._v("注册")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.loginParam.username,expression:"loginParam.username"}],attrs:{type:"text",maxlength:"30",placeholder:"用户名"},domProps:{value:t.loginParam.username},on:{input:function(e){e.target.composing||t.$set(t.loginParam,"username",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.loginParam.password,expression:"loginParam.password"}],attrs:{type:"password",maxlength:"30",placeholder:"密码"},domProps:{value:t.loginParam.password},on:{input:function(e){e.target.composing||t.$set(t.loginParam,"password",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.loginParam.email,expression:"loginParam.email"}],attrs:{type:"email",placeholder:"邮箱"},domProps:{value:t.loginParam.email},on:{input:function(e){e.target.composing||t.$set(t.loginParam,"email",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.loginParam.code,expression:"loginParam.code"}],attrs:{type:"text",placeholder:"验证码",disabled:""},domProps:{value:t.loginParam.code},on:{input:function(e){e.target.composing||t.$set(t.loginParam,"code",e.target.value)}}}),e("a",{staticStyle:{margin:"0"},attrs:{href:"#"},on:{click:function(e){return t.changeDialog("邮箱验证码")}}},[t._v("获取验证码")]),e("button",{on:{click:function(e){return t.regist()}}},[t._v("注册")])])]),e("div",{staticClass:"form-container sign-in-container"},[e("div",{staticClass:"myCenter"},[e("h1",[t._v("登录")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],attrs:{type:"text",placeholder:"用户名/邮箱"},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.loginParam.password,expression:"loginParam.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.loginParam.password},on:{input:function(e){e.target.composing||t.$set(t.loginParam,"password",e.target.value)}}}),e("a",{attrs:{href:"#"},on:{click:function(e){return t.changeDialog("找回密码")}}},[t._v("忘记密码？")]),e("button",{on:{click:function(e){return t.login()}}},[t._v("登录")])])]),e("div",{staticClass:"overlay-container"},[e("div",{staticClass:"overlay"},[e("div",{staticClass:"overlay-panel myCenter overlay-left"},[e("h1",[t._v("已有帐号？")]),e("p",[t._v("请登录🚀")]),e("button",{staticClass:"ghost",on:{click:function(e){return t.signIn()}}},[t._v("登录")])]),e("div",{staticClass:"overlay-panel myCenter overlay-right"},[e("h1",[t._v("没有帐号？")]),e("p",[t._v("立即注册吧😃")]),e("button",{staticClass:"ghost",on:{click:function(e){return t.signUp()}}},[t._v("注册")])])])])])],1):e("div",{staticClass:"user-container myCenter my-animation-hideToShow"},[t._m(1),e("div",{staticClass:"shadow-box-mini user-info",staticStyle:{display:"flex"}},[e("div",{staticClass:"user-left"},[e("div",[e("el-tabs",{attrs:{stretch:"stretch"},on:{"tab-click":t.clickTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"个人资料",name:"个人资料"}},[e("PersonPage",{attrs:{currentUser:t.currentUser}})],1),e("el-tab-pane",{attrs:{label:"我发表的博客",name:"我发表的博客"}},[e("div",{staticStyle:{"margin-top":"30px","margin-bottom":"30px"}},[e("proButton",{attrs:{info:"发表博客",before:"rgb(131, 123, 199)",after:"linear-gradient(45deg, #f43f3b, #ec008c)"},nativeOn:{click:function(e){return t.addBlog()}}})],1),e("div",[e("myBlogList",{attrs:{blogs:t.blogs}})],1)]),e("el-tab-pane",{attrs:{label:"我报名的活动",name:"我报名的活动"}},[e("div",[e("myActivityList")],1)]),e("el-tab-pane",{attrs:{label:"我的点赞",name:"我的点赞"}},[e("div",{staticStyle:{display:"flex","flex-direction":"row","margin-top":"30px"}},[e("div",{staticStyle:{margin:"auto 5px"}},[e("proButton",{attrs:{info:"博客",before:"rgb(131, 123, 199)",after:"linear-gradient(45deg, #f43f3b, #ec008c)"},nativeOn:{click:function(e){t.likesCurrent="博客"}}})],1),e("div",{staticStyle:{margin:"auto 5px"}},[e("proButton",{attrs:{info:"活动",before:"rgb(131, 123, 199)",after:"linear-gradient(45deg, #f43f3b, #ec008c)"},nativeOn:{click:function(e){t.likesCurrent="活动"}}})],1)]),e("div",["博客"===t.likesCurrent?e("myLikeAndCollectBlogList",{staticStyle:{"margin-top":"30px"},attrs:{blogs:t.likeBlog,tip:"点赞",blogType:"like"}}):t._e()],1),e("div",["活动"===t.likesCurrent?e("myLikeAndCollectActivityList",{attrs:{type:"like",tip:"点赞"}}):t._e()],1)]),e("el-tab-pane",{attrs:{label:"我的收藏",name:"我的收藏"}},[e("div",{staticStyle:{display:"flex","flex-direction":"row","margin-top":"30px"}},[e("div",{staticStyle:{margin:"auto 5px"}},[e("proButton",{attrs:{info:"博客",before:"rgb(131, 123, 199)",after:"linear-gradient(45deg, #f43f3b, #ec008c)"},nativeOn:{click:function(e){t.collectCurrent="博客"}}})],1),e("div",{staticStyle:{margin:"auto 5px"}},[e("proButton",{attrs:{info:"活动",before:"rgb(131, 123, 199)",after:"linear-gradient(45deg, #f43f3b, #ec008c)"},nativeOn:{click:function(e){t.collectCurrent="活动"}}})],1)]),e("div",["博客"===t.collectCurrent?e("myLikeAndCollectBlogList",{staticStyle:{"margin-top":"30px"},attrs:{blogs:t.collectBlog,tip:"收藏",blogType:"collect"}}):t._e()],1),e("div",["活动"===t.collectCurrent?e("myLikeAndCollectActivityList",{attrs:{type:"collect",tip:"收藏"}}):t._e()],1)]),e("el-tab-pane",{attrs:{label:"我的评论",name:"我的评论"}},[e("div",{staticStyle:{display:"flex","flex-direction":"row","margin-top":"30px"}},[e("div",{staticStyle:{margin:"auto 5px"}},[e("proButton",{attrs:{info:"博客",before:"rgb(131, 123, 199)",after:"linear-gradient(45deg, #f43f3b, #ec008c)"},nativeOn:{click:function(e){t.commentCurrent="博客"}}})],1),e("div",{staticStyle:{margin:"auto 5px"}},[e("proButton",{attrs:{info:"活动",before:"rgb(131, 123, 199)",after:"linear-gradient(45deg, #f43f3b, #ec008c)"},nativeOn:{click:function(e){t.commentCurrent="活动"}}})],1)]),e("div",["博客"===t.commentCurrent?e("myLikeAndCollectBlogList",{staticStyle:{"margin-top":"30px"},attrs:{blogs:t.commentBlog,tip:"评论",blogType:"comment"}}):t._e()],1),e("div",["活动"===t.commentCurrent?e("myLikeAndCollectActivityList",{attrs:{type:"comment",tip:"评论"}}):t._e()],1)])],1)],1)])])],1),e("el-dialog",{attrs:{title:t.dialogTitle,visible:t.showDialog,width:"30%","append-to-body":!0,"close-on-click-modal":!1,center:""},on:{"update:visible":function(e){t.showDialog=e}}},[e("div",{staticClass:"myCenter",staticStyle:{"flex-direction":"column"}},[e("div",["找回密码"===t.dialogTitle?e("div",[e("div",{staticClass:"myCenter",staticStyle:{"margin-bottom":"12px"}},[e("el-radio-group",{model:{value:t.passwordFlag,callback:function(e){t.passwordFlag=e},expression:"passwordFlag"}},[e("el-radio",{staticStyle:{"margin-right":"10px"},attrs:{label:1}},[t._v("手机号")]),e("el-radio",{attrs:{label:2}},[t._v("邮箱")])],1)],1),1===t.passwordFlag?e("div",[e("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("手机号：")]),e("el-input",{model:{value:t.loginParam.phone,callback:function(e){t.$set(t.loginParam,"phone",e)},expression:"loginParam.phone"}}),e("div",{staticStyle:{"margin-top":"10px","margin-bottom":"5px"}},[t._v("验证码：")]),e("el-input",{model:{value:t.loginParam.code,callback:function(e){t.$set(t.loginParam,"code",e)},expression:"loginParam.code"}}),e("div",{staticStyle:{"margin-top":"10px","margin-bottom":"5px"}},[t._v("新密码：")]),e("el-input",{attrs:{maxlength:"30"},model:{value:t.loginParam.password,callback:function(e){t.$set(t.loginParam,"password",e)},expression:"loginParam.password"}})],1):2===t.passwordFlag?e("div",[e("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("邮箱：")]),e("el-input",{model:{value:t.loginParam.email,callback:function(e){t.$set(t.loginParam,"email",e)},expression:"loginParam.email"}}),e("div",{staticStyle:{"margin-top":"10px","margin-bottom":"5px"}},[t._v("验证码：")]),e("el-input",{model:{value:t.loginParam.code,callback:function(e){t.$set(t.loginParam,"code",e)},expression:"loginParam.code"}}),e("div",{staticStyle:{"margin-top":"10px","margin-bottom":"5px"}},[t._v("新密码：")]),e("el-input",{attrs:{maxlength:"30"},model:{value:t.loginParam.password,callback:function(e){t.$set(t.loginParam,"password",e)},expression:"loginParam.password"}})],1):t._e()]):"邮箱验证码"===t.dialogTitle?e("div",[e("div",[e("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("邮箱：")]),e("el-input",{model:{value:t.loginParam.email,callback:function(e){t.$set(t.loginParam,"email",e)},expression:"loginParam.email"}}),e("div",{staticStyle:{"margin-top":"10px","margin-bottom":"5px"}},[t._v("验证码：")]),e("el-input",{model:{value:t.loginParam.code,callback:function(e){t.$set(t.loginParam,"code",e)},expression:"loginParam.code"}})],1)]):t._e()]),e("div",{staticStyle:{display:"flex","margin-top":"30px"}},[e("proButton",{directives:[{name:"show",rawName:"v-show",value:"找回密码"===t.dialogTitle||"邮箱验证码"===t.dialogTitle,expression:"dialogTitle === '找回密码' || dialogTitle === '邮箱验证码'"}],staticStyle:{"margin-right":"20px"},attrs:{info:t.codeString,before:t.$constant.before_color_1,after:t.$constant.after_color_1},nativeOn:{click:function(e){return t.getCode()}}}),e("proButton",{attrs:{info:"提交",before:t.$constant.before_color_2,after:t.$constant.after_color_2},nativeOn:{click:function(e){return t.submitDialog()}}})],1)])])],1)},o=[function(){var t=this,e=t._self._c;return e("el-image",{staticClass:"my-el-image",staticStyle:{position:"absolute"},attrs:{lazy:"",src:t.login_register_src,fit:"cover"}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])},function(){var t=this,e=t._self._c;return e("el-image",{staticClass:"my-el-image",staticStyle:{position:"absolute"},attrs:{lazy:"",src:t.src,fit:"cover"}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])}];const s=()=>i.e(903).then(i.bind(i,16903)),r=()=>i.e(662).then(i.bind(i,19662)),l=()=>i.e(578).then(i.bind(i,10578)),n=()=>i.e(110).then(i.bind(i,37110)),m=()=>i.e(834).then(i.bind(i,32834)),c=()=>i.e(326).then(i.bind(i,20326));var g={components:{proButton:s,PersonPage:r,myBlogList:l,myActivityList:n,myLikeAndCollectBlogList:m,myLikeAndCollectActivityList:c},data(){return{currentUser:this.$store.state.currentUser,loginParam:{email:"",password:"",code:"",username:""},showDialog:!1,code:"",dialogTitle:"",codeString:"验证码",passwordFlag:null,src:i(2619),login_register_src:i(69646),activeName:"个人资料",blogs:[],likeBlog:[],collectBlog:[],commentBlog:[],stretch:!1,likesCurrent:"博客",collectCurrent:"博客",commentCurrent:"博客",blogType:"like"}},computed:{inputValue:{get(){return this.loginParam.username||this.loginParam.email},set(t){t.includes("@")?(this.loginParam.email=t,this.loginParam.username=""):(this.loginParam.username=t,this.loginParam.email="")}}},created(){this.loadMyBlogs(),this.loadMyLikeBlogs(),this.loadCollectBlogs(),this.loadCommentBlogs()},methods:{addBlog(){window.open("/front/newBlog")},loadMyBlogs(){let t=this.$store.state.currentUser.id;this.$request.get("/blog/selectByUserId/"+t).then((t=>{this.blogs=t.data}))},loadMyLikeBlogs(){let t=this.$store.state.currentUser.id;"like"===this.blogType&&this.$request.get("/blog/selectLikesByUserId/"+t).then((t=>{this.likeBlog=t.data}))},loadCollectBlogs(){let t=this.$store.state.currentUser.id;this.blogType="collect","collect"===this.blogType&&this.$request.get("/blog/selectCollectByUserId/"+t).then((t=>{this.collectBlog=t.data})).catch((t=>{console.error("Error loading collected blogs:",t)}))},loadCommentBlogs(){let t=this.$store.state.currentUser.id;this.blogType="comment","comment"===this.blogType&&this.$request.get("/blog/selectCommentByUserId/"+t).then((t=>{this.commentBlog=t.data})).catch((t=>{console.error("Error loading collected blogs:",t)}))},clickTab(t){console.log(t)},signUp(){document.querySelector("#loginAndRegist").classList.add("right-panel-active")},signIn(){document.querySelector("#loginAndRegist").classList.remove("right-panel-active")},login(){if(this.$common.isEmpty(this.loginParam.password))return void this.$message.error("请输入密码！");let t={password:this.loginParam.password.trim(),role:"USER"};this.$common.isEmpty(this.loginParam.username)?t.username="":t.username=this.loginParam.username.trim(),this.$common.isEmpty(this.loginParam.email)?t.email="":t.email=this.loginParam.email.trim(),this.$request.post("/user/login",t).then((t=>{"200"===t.code?(location.href="/front/home",localStorage.setItem("USER",JSON.stringify(t.data)),this.loginParam.password=""):this.$message.error(t.msg)}))},regist(){if(this.$common.isEmpty(this.loginParam.username)||this.$common.isEmpty(this.loginParam.password))return void this.$message.error("请输入用户名或密码！");if("邮箱验证码"===this.dialogTitle&&this.$common.isEmpty(this.loginParam.email))return this.$message.error("请输入邮箱！"),!1;if(this.$common.isEmpty(this.loginParam.code))return void this.$message.error("请输入验证码！");if(-1!==this.loginParam.username.indexOf(" ")||-1!==this.loginParam.password.indexOf(" "))return void this.$message.error("用户名或密码不能包含空格！");let t={username:this.loginParam.username.trim(),code:this.loginParam.code.trim(),password:this.loginParam.password.trim(),role:"USER"};"邮箱验证码"===this.dialogTitle&&(t.email=this.loginParam.email),this.$request.post("/user/register",t).then((t=>{"200"===t.code?(this.$message.success("注册成功"),this.loginParam.username="",this.loginParam.password="",this.loginParam.email="",this.loginParam.code=""):this.$message.error(t.msg)}))},changeDialog(t){if("邮箱验证码"===t){if(this.$common.isEmpty(this.loginParam.email))return this.$message.error("请输入邮箱！"),!1;if(!/^\w+@[a-zA-Z0-9]{2,10}(?:\.[a-z]{2,4}){1,3}$/.test(this.loginParam.email))return this.$message.error("邮箱格式有误！"),!1}this.dialogTitle=t,this.showDialog=!0},getCode(){"验证码"===this.codeString&&("邮箱验证码"!==this.dialogTitle&&"找回密码"!==this.dialogTitle||this.$request.post("/user/code/request",{email:this.loginParam.email}).then((t=>{this.$request.post("/user/code/email",{email:this.loginParam.email,code:t.data}).then((t=>{"200"===t.code&&this.$notify({title:"邮箱验证码已发送",message:"验证码有效时长5分钟, 失效请重新发送",type:"success",duration:15e3})}))})))},submitDialog(){"找回密码"===this.dialogTitle?1!==this.passwordFlag&&2!==this.passwordFlag?this.$message.error("请选择找回方式！"):2==this.passwordFlag&&this.updateSecretInfo():"邮箱验证码"===this.dialogTitle&&(this.showDialog=!1)},updateSecretInfo(){if(this.$common.isEmpty(this.loginParam.code))return void this.$message.error("请输入验证码！");this.$common.isEmpty(this.loginParam.password)?(this.$message.error("请输入密码！"),t=!1):/(?=.*[a-zA-Z])[a-zA-Z0-9]{6,18}/.test(this.loginParam.password)||(this.$message.error("密码长度在6-18个字符，只能包含数字、大小写字母，且至少包含一个字母"),t=!1);let t=!0;if(!t)return;let e={email:this.loginParam.email.trim(),code:this.loginParam.code.trim(),password:this.loginParam.password.trim()};"找回密码"===this.dialogTitle&&this.$request.post("/user/findPassword",e).then((t=>{"200"===t.code?(this.$message.success({message:"密码修改成功，请重新登录！",duration:5e3}),this.loginParam.password="",this.loginParam.email="",this.loginParam.code="",this.showDialog=!1):this.$message.error(t.msg)}))}}},d=g,p=i(81656),u=(0,p.A)(d,a,o,!1,null,"6acc3d57",null),h=u.exports},2619:function(t,e,i){t.exports=i.p+"img/boyWithCat.fea4cbef.jpg"},69646:function(t,e,i){t.exports=i.p+"img/nice.82317bd9.jpg"}}]);
//# sourceMappingURL=205.19362d5d.js.map