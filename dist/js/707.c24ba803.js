"use strict";(self["webpackChunkblog_frontend"]=self["webpackChunkblog_frontend"]||[]).push([[707],{72707:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticStyle:{width:"390px",padding:"50px 30px","background-color":"white","border-radius":"5px",opacity:"0.9"}},[e("div",{staticStyle:{"text-align":"center","font-size":"24px","margin-bottom":"30px",color:"#333"}},[t._v("欢迎使用")]),e("el-form",{ref:"formRef",attrs:{model:t.admin,rules:t.rules}},[e("el-form-item",{attrs:{prop:"username"}},[e("el-input",{attrs:{size:"medium","prefix-icon":"el-icon-user",placeholder:"请输入账号"},model:{value:t.admin.username,callback:function(e){t.$set(t.admin,"username",e)},expression:"admin.username"}})],1),e("el-form-item",{attrs:{prop:"password"}},[e("el-input",{attrs:{size:"medium","prefix-icon":"el-icon-lock",placeholder:"请输入密码","show-password":""},model:{value:t.admin.password,callback:function(e){t.$set(t.admin,"password",e)},expression:"admin.password"}})],1),e("el-form-item",{attrs:{prop:"code"}},[e("div",{staticStyle:{display:"flex"}},[e("el-input",{staticStyle:{flex:"1"},attrs:{size:"medium"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),e("Identify",{staticStyle:{cursor:"pointer"},attrs:{identifyCode:t.identifyCode},nativeOn:{click:function(e){return t.refreshCode()}}})],1)]),e("el-form-item",[e("el-button",{staticStyle:{width:"100%","background-color":"#2a60c9","border-color":"#2a60c9",color:"white"},attrs:{size:"medium"},on:{click:t.login}},[t._v("登 录")])],1)],1)],1)])},r=[],n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"s-canvas"},[e("canvas",{attrs:{id:"s-canvas",width:t.contentWidth,height:t.contentHeight}})])},a=[],s={name:"Identify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:28},fontSizeMax:{type:Number,default:40},backgroundColorMin:{type:Number,default:180},backgroundColorMax:{type:Number,default:240},colorMin:{type:Number,default:50},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:40},lineColorMax:{type:Number,default:180},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:112},contentHeight:{type:Number,default:35}},methods:{randomNum(t,e){return Math.floor(Math.random()*(e-t)+t)},randomColor(t,e){var i=this.randomNum(t,e),o=this.randomNum(t,e),r=this.randomNum(t,e);return"rgb("+i+","+o+","+r+")"},drawPic(){var t=document.getElementById("s-canvas"),e=t.getContext("2d");e.textBaseline="bottom",e.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),e.fillRect(0,0,this.contentWidth,this.contentHeight);for(let i=0;i<this.identifyCode.length;i++)this.drawText(e,this.identifyCode[i],i);this.drawLine(e),this.drawDot(e)},drawText(t,e,i){t.fillStyle=this.randomColor(this.colorMin,this.colorMax),t.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";var o=(i+1)*(this.contentWidth/(this.identifyCode.length+1)),r=this.randomNum(this.fontSizeMax,this.contentHeight-5),n=this.randomNum(-30,30);t.translate(o,r),t.rotate(n*Math.PI/270),t.fillText(e,0,0),t.rotate(-n*Math.PI/270),t.translate(-o,-r)},drawLine(t){for(let e=0;e<2;e++)t.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),t.beginPath(),t.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),t.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),t.stroke()},drawDot(t){for(let e=0;e<20;e++)t.fillStyle=this.randomColor(0,255),t.beginPath(),t.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),t.fill()}},watch:{identifyCode(){this.drawPic()}},mounted(){this.drawPic()}},d=s,l=i(81656),h=(0,l.A)(d,n,a,!1,null,"66e9761e",null),m=h.exports,u={name:"Login",components:{Identify:m},data(){return{admin:{role:"ADMIN"},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},code:"",identifyCode:"",identifyCodes:"123456789ABCDEFGHGKMNPQRSTUVWXY"}},created(){},mounted(){this.refreshCode()},methods:{refreshCode(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode(t,e){for(let i=0;i<e;i++)this.identifyCode+=this.identifyCodes[Math.floor(Math.random()*this.identifyCodes.length)]},login(){return this.code?this.code.toLowerCase!==this.identifyCode.toLowerCase?(this.$message.warning("验证码错误"),void this.refreshCode()):void this.$refs["formRef"].validate((t=>{t&&this.$request.post("/login",this.admin).then((t=>{"200"===t.code?(this.$message.success("登录成功"),setTimeout((()=>{"ADMIN"===t.data.role&&(localStorage.removeItem("USER"),location.href="/manager/home",localStorage.setItem("ADMIN",JSON.stringify(t.data)))}),500)):(this.refreshCode(),this.$message.error(t.msg))}))})):(this.$message.warning("请输入验证码"),void this.refreshCode())}}},c=u,f=(0,l.A)(c,o,r,!1,null,"8c073444",null),p=f.exports}}]);
//# sourceMappingURL=707.c24ba803.js.map