"use strict";(self["webpackChunkblog_frontend"]=self["webpackChunkblog_frontend"]||[]).push([[436,903],{16903:function(t,e,r){r.r(e),r.d(e,{default:function(){return c}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"myButton"},[e("div",{style:t.beforeColor},[t._v(t._s(t.info))]),e("div",{style:t.afterColor},[t._v(t._s(t.info))]),e("div",{style:t.afterColor},[t._v(t._s(t.info))])])},a=[],s={props:{info:{type:String,default:"确定"},before:{type:String},after:{type:String}},data(){return{beforeColor:{background:this.before},afterColor:{background:this.after}}}},i=s,l=r(81656),n=(0,l.A)(i,o,a,!1,null,"850adb76",null),c=n.exports},20436:function(t,e,r){r.r(e),r.d(e,{default:function(){return d}});var o=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("div",{staticClass:"user-container myCenter my-animation-hideToShow"},[t._m(0),e("div",{staticClass:"shadow-box-mini user-info",staticStyle:{display:"flex"}},[e("div",{staticClass:"user-left"},[t._m(1),e("el-form",{ref:"formRef",staticStyle:{"padding-right":"50px"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"标题",prop:"title"}},[e("el-input",{attrs:{placeholder:"标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),e("el-form-item",{attrs:{label:"简介",prop:"descr"}},[e("el-input",{attrs:{type:"textarea",placeholder:"简介"},model:{value:t.form.descr,callback:function(e){t.$set(t.form,"descr",e)},expression:"form.descr"}})],1),e("el-form-item",{attrs:{label:"封面",prop:"cover"}},[e("el-upload",{attrs:{action:t.$baseUrl+"/tencent/image",headers:{token:t.user.token},"list-type":"picture","on-success":t.handleCoverSuccess}},[e("el-button",{attrs:{type:"primary"}},[t._v("上传封面")])],1)],1),e("el-form-item",{attrs:{label:"分类",prop:"categoryId"}},[e("el-select",{staticStyle:{width:"100%"},model:{value:t.form.categoryId,callback:function(e){t.$set(t.form,"categoryId",e)},expression:"form.categoryId"}},t._l(t.categoryList,(function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1),e("el-form-item",{attrs:{label:"标签",prop:"tags"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":""},on:{change:t.handleChange},model:{value:t.tagsArr,callback:function(e){t.tagsArr=e},expression:"tagsArr"}},[e("el-option",{attrs:{value:"Java"}}),e("el-option",{attrs:{value:"面试"}}),e("el-option",{attrs:{value:"Vue"}}),e("el-option",{attrs:{value:"大数据"}}),e("el-option",{attrs:{value:"算法"}}),e("el-option",{attrs:{value:"程序员"}}),e("el-option",{attrs:{value:"我们应该怎样活着"}}),e("el-option",{attrs:{value:"被偷走的那几年"}})],1)],1),e("el-form-item",{attrs:{label:"内容",prop:"content"}},[e("div",{staticClass:"w-e-text"},[e("layEditor",{attrs:{content:t.content},on:{change:t.onLayEditor}})],1)])],1),e("div",[e("proButton",{attrs:{info:"保存",before:"rgb(131, 123, 199)",after:"linear-gradient(45deg, #f43f3b, #ec008c)"},nativeOn:{click:function(e){return t.save()}}})],1)],1)])],1)])])},a=[function(){var t=this,e=t._self._c;return e("el-image",{staticClass:"my-el-image",staticStyle:{position:"absolute"},attrs:{lazy:"",src:t.src,fit:"cover"}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])},function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{margin:"40px auto 40px 0px"}},[t._v("发表/编辑")])])}],s=r(16903),i={name:"newBlog",components:{proButton:s["default"]},data(){return{form:{},user:JSON.parse(localStorage.getItem("USER")||"{}"),rules:{},blogId:this.$route.query.blogId,ids:[],categoryList:[],tagsArr:[],content:[],options:{uploadImg(t,e){let r=new FormData;return r.append("file",t),this.$request.post("/files/emotion/upload",r).then((t=>t.data.url)).catch((t=>{throw console.error("上传失败:",t),t}))},dialogue:[{leftImg:"https://lay-editor.gitee.io/lay-editor-doc/dialogue/hamster-1.png",rightImg:"https://lay-editor.gitee.io/lay-editor-doc/dialogue/hamster-2.png"}],maxEmoticon:[{},{}],minEmoticon:[{}]},src:r(2619),uploadHeaders:{"Common-Token":"aoligeimeimaobin"}}},created(){this.load()},mounted(){},methods:{onLayEditor(t){},save(){this.$refs.formRef.validate((t=>{t&&(this.form.tags=JSON.stringify(this.tagsArr),this.form.content=JSON.stringify(this.content),this.$request({url:this.form.id?"/blog/update":"/blog/add",method:this.form.id?"PUT":"POST",data:this.form}).then((t=>{"200"===t.code?this.$message.success("保存成功"):this.$message.error(t.msg)})))}))},load(){this.$request.get("/category/selectAll").then((t=>{this.categoryList=t.data||[]})),this.$request.get("/blog/selectById/"+this.blogId).then((t=>{this.form=t.data||{},this.form.id&&setTimeout((()=>{this.content=JSON.parse(this.form.content||"[]"),this.tagsArr=JSON.parse(this.form.tags||"[]")}),0)}))},handleCoverSuccess(t){this.form.cover=t.data},handleChange(t){t.length>1&&(this.tagsArr=[t[t.length-1]])}}},l=i,n=r(81656),c=(0,n.A)(l,o,a,!1,null,"0d6c34c6",null),d=c.exports},2619:function(t,e,r){t.exports=r.p+"img/boyWithCat.fea4cbef.jpg"}}]);
//# sourceMappingURL=436.621da8a8.js.map